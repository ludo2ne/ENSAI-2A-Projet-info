<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rémi Pépin, Ludovic Deneuville">
<meta name="description" content="TP 2">

<title>Python, POO, Tests Unitaires et Documentation – Projet info 2A</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Projet info 2A</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> <i class="bi bi-house" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projet" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projet</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projet">    
        <li>
    <a class="dropdown-item" href="../../doc/projet/presentation-tuteurs.html">
 <span class="dropdown-text">Présentation pour les tuteurs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/projet/presentation-eleves.html">
 <span class="dropdown-text">Présentation aux élèves</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/projet/notice-eleves.html">
 <span class="dropdown-text">Notice élèves</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/ludo2ne/ENSAI-2A-projet-info-template">
 <span class="dropdown-text">Template</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/projet/sujets-2024-2025.html">
 <span class="dropdown-text">Sujets 2024-2025</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-cours" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Cours</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-cours">    
        <li>
    <a class="dropdown-item" href="../../doc/cours/intro.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://ludo2ne.github.io/Git-tuto/doc/presentation.html" target="_blank">
 <span class="dropdown-text">Git</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/cours/analyse-fonctionnelle.html">
 <span class="dropdown-text">Analyse fonctionnelle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/cours/poo-avancee.html">
 <span class="dropdown-text">POO Avancée</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/cours/outils-dev.html">
 <span class="dropdown-text">Outils de développement</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/cours/tests-unitaires.html">
 <span class="dropdown-text">Tests unitaires</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/cours/webservices.html">
 <span class="dropdown-text">Webservices</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/cours/dao-securite.html">
 <span class="dropdown-text">DAO et Sécurité</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tp" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">TP</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tp">    
        <li>
    <a class="dropdown-item" href="../../doc/tp/tp1.html">
 <span class="dropdown-text">TP 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/tp/tp2.html">
 <span class="dropdown-text">TP 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/tp/tp3.html">
 <span class="dropdown-text">TP 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../doc/tp/tp4.html">
 <span class="dropdown-text">TP 4</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ludo2ne/ENSAI-2A-Projet-info" target="_blank"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="3">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#avant-de-commencer" id="toc-avant-de-commencer" class="nav-link active" data-scroll-target="#avant-de-commencer">Avant de commencer</a></li>
  <li><a href="#ce-que-vous-allez-coder" id="toc-ce-que-vous-allez-coder" class="nav-link" data-scroll-target="#ce-que-vous-allez-coder"><span class="header-section-number">1</span> Ce que vous allez coder</a>
  <ul class="collapse">
  <li><a href="#objets-métier" id="toc-objets-métier" class="nav-link" data-scroll-target="#objets-métier"><span class="header-section-number">1.1</span> Objets métier</a></li>
  <li><a href="#les-objets-métier-de-lappli" id="toc-les-objets-métier-de-lappli" class="nav-link" data-scroll-target="#les-objets-métier-de-lappli"><span class="header-section-number">1.2</span> Les objets métier de l’appli</a></li>
  <li><a href="#diagramme-de-classes" id="toc-diagramme-de-classes" class="nav-link" data-scroll-target="#diagramme-de-classes"><span class="header-section-number">1.3</span> Diagramme de classes</a></li>
  </ul></li>
  <li><a href="#clone-du-dépôt" id="toc-clone-du-dépôt" class="nav-link" data-scroll-target="#clone-du-dépôt"><span class="header-section-number">2</span> Clone du dépôt</a>
  <ul class="collapse">
  <li><a href="#ouverture-dans-vscode" id="toc-ouverture-dans-vscode" class="nav-link" data-scroll-target="#ouverture-dans-vscode"><span class="header-section-number">2.1</span> Ouverture dans VSCode</a></li>
  </ul></li>
  <li><a href="#modélisation-et-implémentation" id="toc-modélisation-et-implémentation" class="nav-link" data-scroll-target="#modélisation-et-implémentation"><span class="header-section-number">3</span> Modélisation et implémentation</a>
  <ul class="collapse">
  <li><a href="#première-approche-le-ifelifelse" id="toc-première-approche-le-ifelifelse" class="nav-link" data-scroll-target="#première-approche-le-ifelifelse"><span class="header-section-number">3.1</span> Première approche : le « if/elif/else »</a></li>
  <li><a href="#la-puissance-de-la-poo" id="toc-la-puissance-de-la-poo" class="nav-link" data-scroll-target="#la-puissance-de-la-poo"><span class="header-section-number">3.2</span> La puissance de la POO</a></li>
  <li><a href="#testez-votre-code" id="toc-testez-votre-code" class="nav-link" data-scroll-target="#testez-votre-code"><span class="header-section-number">3.3</span> Testez votre code</a></li>
  </ul></li>
  <li><a href="#lagrégation-lautre-façon-dajouter-de-la-souplesse-dans-le-code" id="toc-lagrégation-lautre-façon-dajouter-de-la-souplesse-dans-le-code" class="nav-link" data-scroll-target="#lagrégation-lautre-façon-dajouter-de-la-souplesse-dans-le-code"><span class="header-section-number">4</span> L’agrégation, l’autre façon d’ajouter de la souplesse dans le code</a>
  <ul class="collapse">
  <li><a href="#attaques-à-dégâts-fixes" id="toc-attaques-à-dégâts-fixes" class="nav-link" data-scroll-target="#attaques-à-dégâts-fixes"><span class="header-section-number">4.1</span> Attaques à dégâts fixes</a></li>
  <li><a href="#attaques-à-dégâts-variables" id="toc-attaques-à-dégâts-variables" class="nav-link" data-scroll-target="#attaques-à-dégâts-variables"><span class="header-section-number">4.2</span> Attaques à dégâts variables</a></li>
  </ul></li>
  <li><a href="#architecture-finale" id="toc-architecture-finale" class="nav-link" data-scroll-target="#architecture-finale"><span class="header-section-number">5</span> Architecture finale</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Python, POO, Tests Unitaires et Documentation</h1>
</div>

<div>
  <div class="description">
    TP 2
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rémi Pépin, Ludovic Deneuville </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="avant-de-commencer" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="avant-de-commencer">Avant de commencer</h2>
<p>Ce TP mêle explications et phases de code.</p>
<p>Les explications de ce TP ne doivent pas prendre le pas sur celles de votre intervenant. Prenez les comme une base de connaissance pour plus tard, mais préférez toujours les explications orales.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Notions abordées">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Notions abordées
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Rappels sur la POO</li>
<li>Tests Unitaires</li>
<li>Objets métier</li>
<li>Patron de conception strategy</li>
</ul>
</div>
</div>
</section>
<section id="ce-que-vous-allez-coder" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="ce-que-vous-allez-coder"><span class="header-section-number">1</span> Ce que vous allez coder</h2>
<p>Notre jeu s’inspirera de <em>Pokémon Unite</em> (aucune connaissance du jeu, ni de <em>Pokémon</em> n’est nécessaire).</p>
<p>En quelques mots, il y aura des <em>Pokemons</em> qui s’affronteront lors de <em>Battles</em> en lançant des <em>Attacks</em>.</p>
<section id="objets-métier" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="objets-métier"><span class="header-section-number">1.1</span> Objets métier</h3>
<p>Vous allez créer les <strong>objets métier</strong> pour un jeu <em>Pokémon</em>.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Objet métier (business object)">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Objet métier (business object)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Un objet métier est une représentation d’une entité spécifique dans le contexte d’une application métier. Il encapsule les données et les comportements associés à cette entité et est souvent utilisé pour modéliser des concepts du monde réel dans le domaine de l’application.</p>
<p>Cela conduit à avoir des objets contenant essentiellement des attributs et très peu de méthodes autre que des <em>getter</em> et <em>setter</em>.</p>
</div>
</div>
<p>Pour prendre un autre exemple, voici des objets métier pour une application simple qui gère la location de vélos :</p>
<ul>
<li><strong>Velo</strong> : Représente un vélo (id, type, modèle…)</li>
<li><strong>Client</strong> : Représente une personne (id, nom, prénom…)</li>
<li><strong>Location</strong> : Représente une transaction de location (id, Client, Velo, debut, fin, montant…)</li>
</ul>
</section>
<section id="les-objets-métier-de-lappli" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="les-objets-métier-de-lappli"><span class="header-section-number">1.2</span> Les objets métier de l’appli</h3>
<ul>
<li><code>Pokemon</code> : qui ont diverses caractéristiques et statistiques
<ul>
<li>un nom</li>
<li>un niveau</li>
<li><a href="https://www.nationhive.com/fr/jeux/pokemon-unite/guide/roles-des-pokemon" target="_blank">un type</a>
<ul>
<li>ici les types sont : Attaquant, Défenseur, Polyvalant, Soutient et Rapide (et non pas : Feu, Eau, Plante…)</li>
</ul></li>
<li>des statistiques contenues dans un objet <em>Statistic</em> défini ci-dessous</li>
</ul></li>
<li><code>Statistic</code> : pour éviter de surcharger la classe Pokemon, leurs stats sont stockées dans un objet de la classe Statistic
<ul>
<li>hp : health points</li>
<li>attack, defense, speed… : qui serviront déterminer la force de ses attaques</li>
</ul></li>
<li><code>Attack</code> : différents types d’attaques dont disposeront les Pokemons (partie 3)</li>
<li><code>Battle</code> : servira à faire s’affronter 2 Pokemons pour déterminer l’issue du combat (partie 4)</li>
</ul>
</section>
<section id="diagramme-de-classes" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="diagramme-de-classes"><span class="header-section-number">1.3</span> Diagramme de classes</h3>
<p>Voici un diagramme de classes très simplifié des classes principales à coder lors de ces TP.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">classDiagram
  class Pokemon {
    # _name : str
    # _level : int
    # _type : str
    # _current_stat : Statistic
    + get_pokemon_attack_coef() float
  }
 
  class Statistic {
    - __hp : int
    - __attack : int
    - __defense : int
    - __sp_atk : int
    - __sp_def : int
    - __speed : int
  }

  class Attack{
    # _name : str
    # _power : int
    # _description : str
    + compute_damage(Pokemon, Pokemon) int
  }

  class Battle{
    - first_monstie : Pokemon
    - second_monstie : Pokemon
    - winner : Pokemon
  }

  Pokemon o-- Statistic : possesses
  Pokemon o-- Attack : uses
  Battle o.."2" Pokemon : call
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
</section>
<section id="clone-du-dépôt" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="clone-du-dépôt"><span class="header-section-number">2</span> Clone du dépôt</h2>
<p>Le code du TP se trouve sur <a href="https://github.com/ludo2ne/ENSAI-2A-complement-info-TP" target="_blank">GitHub</a>, vous allez créer un clone local.</p>
<ul class="task-list">
<li><label><input type="checkbox">Ouvrez <strong>Git Bash</strong></label></li>
<li><label><input type="checkbox">Créez un dossier pour stocker votre clone</label>
<ul>
<li>À la main ou avec cette commande : <code>mkdir -p /p/Cours2A/UE3-Complements-info/TP2 &amp;&amp; cd $_</code>
<ul>
<li>Elle crée l’arborescence demandée (<em>mkdir</em>)</li>
<li>Puis elle vous positionne dans ce dossier (<em>cd</em>)</li>
</ul></li>
</ul></li>
<li><label><input type="checkbox">Clonez le dépôt distant</label>
<ul>
<li><code>git clone https://github.com/ludo2ne/ENSAI-2A-complement-info-TP.git</code></li>
</ul></li>
<li><label><input type="checkbox">Fermez Git Bash si tout s’est bien passé</label></li>
</ul>
<section id="ouverture-dans-vscode" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="ouverture-dans-vscode"><span class="header-section-number">2.1</span> Ouverture dans VSCode</h3>
<ul class="task-list">
<li><label><input type="checkbox">Ouvrez <strong>Visual Studio Code</strong></label></li>
<li><label><input type="checkbox">Ouvrez votre dépôt local</label>
<ul>
<li>File &gt; Open Folder</li>
<li>Allez dans le dossier <code>P:\Cours2A\UE3-Complements-info\TP1</code></li>
<li>Cliquez <u>une seule fois</u> sur <span class="emoji" data-emoji="file_folder">📁</span> ENSAI-2A-complement-info-TP</li>
<li>Puis sur le bouton <span class="grey-button">Sélectionner un dossier</span></li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<ul class="task-list">
<li><label><input type="checkbox">Vérifiez que le dossier parent dans l’Explorer VS Code est <em>ENSAI-2A-complement-info-TP</em></label>
<ul>
<li>L’Explorer, à gauche, permet d’explorer l’arborsence des fichiers et dossiers</li>
</ul></li>
</ul>
<p><span class="emoji" data-emoji="warning">⚠️</span> Si le dossier parent n’est pas le bon, recommencez l’<em>Open Folder</em> où vous aurez de gros soucis par la suite !!!</p>
</div>
</div>
<ul class="task-list">
<li><label><input type="checkbox">Ouvrez le <em>Git Bash</em> intégré dans VS Code</label>
<ul>
<li>Terminal &gt; New Terminal (ou CTRL + ù)</li>
</ul></li>
</ul>
</section>
</section>
<section id="modélisation-et-implémentation" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="modélisation-et-implémentation"><span class="header-section-number">3</span> Modélisation et implémentation</h2>
<p>Dans un premier temps, nous allons travailler uniquement sur les <code>Pokemons</code> (la classe <code>Statistic</code> est déjà codée).</p>
<p>Avant d’écrire du code, nous allons réfléchir à la meilleure conception possible pour réaliser nos Pokémons. Notre conception essaiera au maximum de respecter la règle suivante : <strong>faible couplage, forte cohésion</strong>.</p>
<p>En d’autre termes nous allons essayer de faire :</p>
<ul>
<li>des classes <strong>les plus disjointes possibles</strong> (<em>faible couplage</em>) pour qu’une modification dans une classe ne nous demande pas de modifier les autres</li>
<li>tout en essayant d’avoir dans chaque classe <strong>les tâches les plus liées possibles</strong> (<em>forte cohésion</em>).</li>
</ul>
<section id="première-approche-le-ifelifelse" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="première-approche-le-ifelifelse"><span class="header-section-number">3.1</span> Première approche : le « if/elif/else »</h3>
<ul class="task-list">
<li><label><input type="checkbox">Ouvrez le code de la classe <code>Pokemon</code></label></li>
</ul>
<p>Nous nous interessons à la méthode <code>get_pokemon_attack_coef()</code> qui va servir à déterminer la puissance de l’attaque en fonction du type de <em>Pokémon</em>.</p>
<ul class="task-list">
<li><label><input type="checkbox">Expliquez pourquoi une implémentation à base de <code>if/elif/else</code> pour les types est une mauvaise idée ?</label>
<ul>
<li>Imaginez s’il y avait plusieurs blocs de code similaires dans notre application, et que nous devions ajouter un nouveau type</li>
</ul></li>
</ul>
</section>
<section id="la-puissance-de-la-poo" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="la-puissance-de-la-poo"><span class="header-section-number">3.2</span> La puissance de la POO</h3>
<p>Au lieu d’externaliser les comportements de nos <em>Pokemons</em>, nous allons mettre tous leurs comportements spécifiques dans des classes filles d’une super classe <code>Pokemon</code>. Ceci est rendu possible grâce à deux propriétés des objets en POO :</p>
<ul>
<li><strong>héritage</strong> : il est possible de spécialiser une classe existante en modifiant son comportement, ou en ajoutant de nouveaux</li>
<li><strong>polymorphisme</strong> : deux fonctions peuvent avoir le même nom mais avoir des comportements différents</li>
</ul>
<p>En plus, comme chacun de nos <em>Pokemons</em> va forcement être d’un type, aucun ne sera simplement de la classe <code>Pokemon</code>, cela nous permet de rendre cette classe <em>abstraite</em>. En définissant clairement notre classe abstraite nous allons avoir :</p>
<ul>
<li>Un plan pour toutes les classes qui en héritent. Cela à pour avantages de :
<ul>
<li>Donner des informations sur la structuration du code<br>
</li>
<li>Permettre de générer automatiquement les méthodes à définir</li>
<li>Limiter les bug. Si on oublie une méthode, le code plante au démarrage, ce qui évite des comportements non prévus difficiles à détecter</li>
</ul></li>
<li>Une <strong>interface</strong> unique pour tous les types de <em>Pokemons</em>. Quelque soit le type du <em>Pokemon</em>, il sera considéré comme un <code>AbstractPokemon</code> partout dans le code.</li>
</ul>
<hr>
<ul class="task-list">
<li><label><input type="checkbox">Transformez la classe <code>Pokemon</code> en classe abstraite <code>AbstractPokemon</code></label>
<ul>
<li>renommez également le fichier en <code>abstract_pokemon.py</code></li>
</ul></li>
<li><label><input type="checkbox">Transformez la méthode <code>get_pokemon_attack_coef()</code> en méthode abstraite</label></li>
<li><label><input type="checkbox">Créez les classes <code>Attacker</code>, <code>Defender</code> et <code>AllRounder</code> qui héritent de <code>AbstractPokemon</code></label></li>
<li><label><input type="checkbox">Dans ces 3 classes, implémentez la méthode <code>get_pokemon_attack_coef()</code></label></li>
</ul>
<p>Vous devriez arriver à la fin à une arborescence proche de celle-ci :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>ENSAI-2A-COMPLEMENTS-INFO-TP</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    └── src</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        └── business_object</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            ├── pokemon</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            │   ├── abstract_pokemon.py</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            │   ├── attacker.py</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            │   ├── defender.py</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            │   └── all_rounder.py</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>            └── statistic.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-tip callout-titled" title="Aide">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Pour faire une classe abstraite, utilisez le package <code>abc</code>.</p>
<p>Voici, pour vous inspirer, un exemple de ce qui est attendu :</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>abstract_personnage.py</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="abstract_personnage.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> abc <span class="im">import</span> ABC, abstractmethod</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AbstractPersonnage(ABC):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, phrase_attaque:<span class="bu">str</span>, phrase_defense:<span class="bu">str</span>):</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._phrase_attaque <span class="op">=</span> phrase_attaque</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._phrase_defense <span class="op">=</span> phrase_defense</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">@abstractmethod</span>  <span class="co"># décorateur qui définit une méthode comme abstraite</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> degat_attaque(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>magicien.py</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="magicien.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> abstract_personnage <span class="im">import</span> AbstractPersonnage</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Magicien(AbstractPersonnage):</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(<span class="st">"Lance une boule de feu"</span>, <span class="st">"Utilise une barrière magique"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> degat_attaque(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>Pour vous aider, voici le diagramme de classes :</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">classDiagram
  class AbstractPokemon {
    &lt;&lt;abstract&gt;&gt;
    # _name : str
    # _level : int
    # _type : str
    # _current_stat : Statistic
    + get_pokemon_attack_coef() float
  }
 
  class Statistic {
    - __hp : int
    - __attack : int
    - __defense : int
    - __sp_atk : int
    - __sp_def : int
    - __speed : int
  }
 
  AbstractPokemon &lt;|-- Attacker
  AbstractPokemon &lt;|-- Defender
  AbstractPokemon &lt;|-- AllRounder
  AbstractPokemon o-- Statistic
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="testez-votre-code" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="testez-votre-code"><span class="header-section-number">3.3</span> Testez votre code</h3>
<ul class="task-list">
<li><label><input type="checkbox">Testez la méthode <code>get_pokemon_attack_coef()</code> pour les classes <code>AttackerPokemon</code> et <code>AllRounderPokemon</code>.</label>
<ul>
<li><code>python -m unittest</code></li>
</ul></li>
</ul>
<p>Pour cela vous allez utiliser le package <code>unittest</code> de python.</p>
<p>Ce package permet de réaliser des tests unitaires dans des classes séparées. L’avantage par rapport à <code>doctest</code>, c’est que les tests ne “polluent” pas vos classes, et qu’il est possible de <em>patcher</em> certains comportements des classes.</p>
<p>Un exemple de test est donné dans la classe <code>testDefenderPokemon</code>. Pour rappel, un test se décompose en 3 parties :</p>
<ul>
<li><strong>GIVEN</strong> : création des objets nécessaires à la réalisation du test</li>
<li><strong>WHEN</strong> : appel de la méthode à tester</li>
<li><strong>THEN</strong> : vérification du résultat</li>
</ul>
<p>Les classes de test seront organisées de la manière suivante, en reproduisant l’architecture de votre application :</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ENSAI-2A-COMPLEMENTS-INFO-TP</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    └── src</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        ├── business_object</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        │   ├── pokemon</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        │   │   ├── abstract_pokemon.py</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        │   │   ├── attacker.py</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        │   │   ├── defender.py</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        │   │   └── all_rounder.py</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        │   └── statistic.py</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        └── test</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>            └── test_business_object</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>                └── test_pokemon</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                    ├── test_attacker.py</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                    ├── test_defender.py</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                    └── test_all_rounder.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-caution callout-titled" title="Si vous rencontrez des problèmes d'imports">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Si vous rencontrez des problèmes d’imports
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Vérifiez que le dossier parent dans l’explorer de VSCode est : <strong>ENSAI-2A-complement-info-TP</strong></li>
<li>Utilisez des chemins complets d’import plutôt que des chemins relatifs
<ul>
<li>la racine des chemins est paramétrée au niveau du dossier <code>src</code></li>
<li>exemple : <code>from business_object.pokemon.abstract_pokemon import AbstractPokemon</code></li>
</ul></li>
<li>Créez des fichiers <code>__init__.py</code> (vide)
<ul>
<li>dans TOUS les dossiers que vous créez</li>
<li>c’est un peu pénible mais ça peut débloquer la situation</li>
</ul></li>
</ul>
</div>
</div>
<ul class="task-list">
<li><label><input type="checkbox">Pouvez-vous tester la méthode <code>level_up()</code> directement sur un <code>AbstractPokemon</code> ?</label></li>
</ul>
</section>
</section>
<section id="lagrégation-lautre-façon-dajouter-de-la-souplesse-dans-le-code" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="lagrégation-lautre-façon-dajouter-de-la-souplesse-dans-le-code"><span class="header-section-number">4</span> L’agrégation, l’autre façon d’ajouter de la souplesse dans le code</h2>
<p>Maintenant que nos Pokémons sont faits, nous allons y ajouter les attaques.</p>
<p>Notre système va devoir respecter certaines contraintes :</p>
<ul>
<li>Plusieurs types d’attaques vont coexister, chacune avec un mode de calcul de dégâts différent :
<ul>
<li>Des attaques à dégâts variables séparées en 2 types :
<ul>
<li>attaques “physiques” qui utilisent l’attaque et la défense des Pokémons</li>
<li>attaques “spéciales” qui utilisent l’attaque spé et la défense spé des Pokémons</li>
</ul></li>
<li>Des attaques à dégâts fixes qui font un nombre fixe de dégâts.</li>
</ul></li>
<li>Un pokémon peut avoir plusieurs attaques et le type de l’attaque doit être transparent pour le pokémon.</li>
</ul>
<hr>
<section id="attaques-à-dégâts-fixes" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="attaques-à-dégâts-fixes"><span class="header-section-number">4.1</span> Attaques à dégâts fixes</h3>
<p>Nous allons commencer par les attaques à dégâts fixes. Comme il y aura un autre type d’attaques, toutes les attaques hériterons de la classe abstraite <code>AbstractAttack</code> déjà créée. Cette classe possède la méthode abstraite <em>compute_damage()</em> qui devra être implémentée dans les classes filles.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">classDiagram

  class AbstractAttack{
    &lt;&lt;abstract&gt;&gt;
    # _power : int
    # _name : str
    # _description : str
    + compute_damage(APkm, APkm)$  int
  }

   class FixedDamageAttack{
    + compute_damage(APkm,APkm )  int
   }
 
   AbstractAttack &lt;|-- FixedDamageAttack
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul class="task-list">
<li><label><input type="checkbox">Implémentez la classe <code>FixedDamageAttack</code></label>
<ul>
<li>ainsi que sa méthode <code>compute_damage()</code> qui retournera simplement la puissance (<em>power</em>) de l’attaque</li>
</ul></li>
<li><label><input type="checkbox">Créez des tests unitaires pour vérifier que tout fonctionne correctement</label></li>
</ul>
</section>
<section id="attaques-à-dégâts-variables" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="attaques-à-dégâts-variables"><span class="header-section-number">4.2</span> Attaques à dégâts variables</h3>
<p>Nous allons ensuite coder les attaques à dégâts variables. Elles utilisent la formule suivante :</p>
<p><span class="math display">\[Damage = \big ( \frac{(\frac{2*Level}{5}+2)* Power *Att}{Def*50} +2\big) *random* other\_multipliers\]</span></p>
<p>avec :</p>
<ul>
<li><span class="math inline">\(Att\)</span>​ : égal soit à l’attaque ou l’attaque spé du Pokemon attaquant</li>
<li><span class="math inline">\(Def\)</span>​​ : égal soit à la défense ou défense spé du Pokemon défenseur</li>
<li><span class="math inline">\(Power\)</span>​ : la valeur de puissance de l’attaque</li>
<li><span class="math inline">\(random\)</span>​​ :une valeur comprise dans l’intervalle [0.85; 1]</li>
<li><span class="math inline">\(other\_ multipliers\)</span> : les autres multiplicateurs possibles, comme le coefficient d’attaque des pokémons.</li>
</ul>
<p>La seule différence entre attaque physique et spéciale vient des coefficients <span class="math inline">\(Att\)</span> et <span class="math inline">\(Def\)</span>, le reste de la formule des dégâts est identique. Nous allons donc utiliser le patron de conception <em>template method</em>, dont voici la modélisation UML dans notre cas :</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">classDiagram

  class AbstractAttack{
    &lt;&lt;abstract&gt;&gt;
    # _power : int
    # _name : str
    # _description : str
    + compute_damage(APkm, APkm)$  int
  }

   class FixedDamageAttack{
    + compute_damage(APkm,APkm )  int
   }

  class AbstractFormulaAttack{
    &lt;&lt;abstract&gt;&gt;
    -get_attack_stat(APkm)$  float
    -get_defense_stat(APkm)$  float
    +compute_damage(APkm,APkm)  int
  }
 
  class PhysicalFormulaAttack{
    -get_attack_stat(APkm)  float
    -get_defense_stat(APkm)  float
  }
 
  class SpecialFormulaAttack{
    -get_attack_stat(APkm)  float
    -get_defense_stat(APkm)  float
  }
 
   AbstractAttack &lt;|-- FixedDamageAttack
   AbstractAttack &lt;|-- AbstractFormulaAttack
   AbstractFormulaAttack &lt;|-- SpecialFormulaAttack
   AbstractFormulaAttack &lt;|-- PhysicalFormulaAttack
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>La classe <code>AbstractFormulaAttack</code> va contenir les méthodes :</p>
<ul>
<li><strong>compute_damage()</strong>. Cette méthode va contenir la formule de calcul des dégâts
<ul>
<li>mais en appelant les méthodes <em>get_attaque_stat()</em> et <em>get_defense_stat()</em> pour savoir quelle statistique utiliser</li>
</ul></li>
<li><strong>get_attack_stat()</strong> et <strong>get_defense_stat()</strong> (abstraites). Ces méthodes devront être implémentées dans les classes filles pour déterminer quelles statistiques utiliser.</li>
</ul>
<hr>
<ul class="task-list">
<li><label><input type="checkbox">Implémentez les 3 nouvelles classes et créez des tests pour vérifier que tout fonctionne correctement</label></li>
</ul>
</section>
</section>
<section id="architecture-finale" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="architecture-finale"><span class="header-section-number">5</span> Architecture finale</h2>
<div class="callout callout-style-default callout-note callout-titled" title="Bonus">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bonus
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si vous avez le temps !</p>
</div>
</div>
<p>Nous allons maintenant rattacher les bouts pour créer notre architecture finale :</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">classDiagram
  class AbstractPokemon {
    &lt;&lt;abstract&gt;&gt;
    # _current_stat : Statistique
    # _level : int
    # _name : str
    # _attack_list : List~AbstractAttack~
    +get_pokemon_attack_coef()$  float
    +level_up() None
  }
 
  class Statistique {
    - hp : int
    - attaque : int
    - defense : int
    - spe_atk : int
    - spe_def : int
    - vitesse : int
  }
   
  class BattleService {
    + resolve_battle(APkm, APkm) : Battle
    + get_order(APkm, APkm)
    + choose_attack(APkm) : AAttack
  }  
  
  class Battle{
    - first_monstie : APkm
    - second_monstie : APkm
    - winner : APkm
    - rounds : List&lt;Round&gt;
  }

  class Round{
    attacker: APkm
    defender: APkm
    dealt_damage: int
    attack_description: str
  }
  BattleService ..&gt;"2" AbstractPokemon : use
  AbstractPokemon &lt;|-- Attacker
  AbstractPokemon &lt;|-- Defender
  AbstractPokemon &lt;|-- AllRounder
  Statistique *-- AbstractPokemon

  Battle .. BattleService
  Battle .. Round
 
  class AbstractAttack{
    &lt;&lt;abstract&gt;&gt;
    # _power : int
    # _name : str
    # _description : str
    +compute_damage(APkm, APkm)$ int
  }

  class FixedDamageAttack{
    + compute_damage(APkm,APkm )  int
  }

  class AbstractFormulaAttack{
    &lt;&lt;abstract&gt;&gt;
    -get_attack_stat(APkm)$  float
    -get_defense_stat(APkm)$  float
    + compute_damage(APkm,APkm ) int
  }
 
  class PhysicalFormulaAttack{
   -get_attack_stat(APkm)$  float
   -get_defense_stat(APkm)$  float
  }
 
  class SpecialFormulaAttack{
    -get_attack_stat(APkm)  float
    -get_defense_stat(APkm)  float
  }
 
  AbstractAttack &lt;|-- FixedDamageAttack
  AbstractAttack &lt;|-- AbstractFormulaAttack
  AbstractFormulaAttack &lt;|-- SpecialFormulaAttack
  AbstractFormulaAttack &lt;|-- PhysicalFormulaAttack
  BattleService &gt;.. AbstractAttack  : use
  AbstractPokemon o--&gt;"0..*" AbstractAttack

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul class="task-list">
<li><label><input type="checkbox">Implémentez le diagramme de classes ci-dessus</label></li>
<li><label><input type="checkbox">Testez votre code en écrivant de nouveaux tests unitaires</label></li>
</ul>
<p>Cette architecture permet de décorréler les attaques des pokémons et de spécifier le comportement des attaques au fur et à mesure des héritages. Les avantages sont :</p>
<ul>
<li>Pour la classe <code>AbstractPokemon</code>, toutes les attaques sont des <code>AbstractAttack</code>. Tant qu’elles exposent la méthode <em>compute_damage()</em> notre programme va fonctionner. On peut ainsi facilement ajouter de nouveaux types d’attaques sans problème.</li>
<li>Un <em>Pokémon</em> peut avoir des attaques de tous les types</li>
<li>Nous pouvons ajouter un système d’état comme la paralysie ou le poison assez facilement. Il faut pour cela modifier la classe <code>AbstractAttack</code> et les classes qui en héritent. Cela sera potentiellement long, mais ne demande pas de toucher à la partie “<em>Pokémon</em>” de notre architecture.</li>
<li>Une personne pourrait se concentrer sur la création des <em>Pokémons</em> alors qu’une autre pourrait se concentrer sur celles des attaques sans difficulté. Les deux parties du code sont relativement indépendantes, la seule zone de couplage sont les classes <code>AbstractPokemon</code> et <code>AbstractAttack</code>, qui servent avant tout à définir ce qui doit être fait par les classes filles et ce qui est accessible à l’extérieur.</li>
</ul>
<p>Le fait d’externaliser le comportement des attaques dans des classes spécifiques puis de les lier aux Pokémons via une relation d’agrégation assez souple qui permet de changer dynamiquement les attaques d’un Pokémon est le patron de conception <em>strategy</em>.</p>
<hr>
<div class="callout callout-style-default callout-tip callout-titled" title="Correction">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Correction
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous avez la possibilité de consulter la correction soit :</p>
<ul>
<li>en changeant votre dépôt local de branche</li>
<li>en consultant la branche adéquat sur le dépôt distant</li>
</ul>
<p>Voici quelques commandes git utiles pour changer de branche :</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a># Lister toutes les branches</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>git branch -a</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a># Avant de changer de branche, créez un point de sauvegarde de votre travail</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>git add .</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>git commit -m "&lt;message&gt;"</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a># changer de branche</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>git checkout &lt;nouvelle_branche&gt;   # dans le terminal, la branche courante est indiquée entre ()</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>git checkout -                    # pour retourner à la branche précédente</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/ludo2ne\.github\.io\/ENSAI-2A-Projet-info\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Website built with <a href="https://quarto.org/" class="external" target="_blank">Quarto</a> <br> <a href="https://github.com/ludo2ne/ENSAI-2A-Projet-info" class="external" target="_blank">Code source</a></p>
</div>
  </div>
</footer>




</body></html>